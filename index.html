<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ödev Portalı — Giriş Sorunu Çözülmüş</title>
  <style>
    body{margin:0;padding:0;font-family:Arial;background:#0f1724;color:#e6eef6;display:flex;align-items:center;justify-content:center;height:100vh}
    .card{background:#111a2a;padding:30px;border-radius:12px;width:320px;box-shadow:0 0 15px rgba(0,0,0,.4)}
    input,select,button{width:100%;margin-top:10px;padding:10px;border-radius:6px;border:1px solid #333;background:#1a2335;color:#fff}
    button{background:linear-gradient(90deg,#06b6d4,#7c3aed);border:none;cursor:pointer;font-weight:bold}
    button:hover{opacity:.9}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="card">

    <div id="loginPanel">
      <h2>Ödev Portalı</h2>
      <select id="roleSelect">
        <option value="class">Sınıf (öğrenci)</option>
        <option value="teacher">Hoca</option>
      </select>
      <input id="user" type="text" placeholder="Kullanıcı adı" />
      <input id="pass" type="password" placeholder="Şifre" />
      <button id="loginBtn" type="button">Giriş Yap</button>
      <p style="font-size:12px;color:#aaa;margin-top:8px">
        👨‍🏫 hoca / hoca123<br>👨‍🎓 sinif / sinif123
      </p>
    </div>

    <div id="studentPanel" class="hidden">
      <h3>👨‍🎓 Öğrenci Paneli</h3>
      <input id="studentName" placeholder="Adınız" />
      <textarea id="assignmentArea" placeholder="Ödevinizi yazın..." rows="6"></textarea>
      <button id="saveBtn" type="button">Kaydet</button>
      <button id="logoutBtn1" type="button">Çıkış</button>
      <p id="lastSaved" style="font-size:12px;color:#aaa"></p>
    </div>

    <div id="teacherPanel" class="hidden">
      <h3>👨‍🏫 Hoca Paneli</h3>
      <input id="teacherStudent" placeholder="Öğrenci adı" />
      <button id="openBtn" type="button">Aç</button>
      <button id="logoutBtn2" type="button">Çıkış</button>
      <textarea id="teacherArea" placeholder="Ödev burada görünecek..." rows="6"></textarea>
    </div>

  </div>

  <script>
    const ACCOUNTS=[
      {username:'hoca',password:'hoca123',role:'teacher'},
      {username:'sinif',password:'sinif123',role:'class'}
    ];
    const loginPanel=document.getElementById("loginPanel");
    const studentPanel=document.getElementById("studentPanel");
    const teacherPanel=document.getElementById("teacherPanel");

    const loginBtn=document.getElementById("loginBtn");
    const logoutBtn1=document.getElementById("logoutBtn1");
    const logoutBtn2=document.getElementById("logoutBtn2");
    const saveBtn=document.getElementById("saveBtn");
    const openBtn=document.getElementById("openBtn");

    let currentUser=null;

    loginBtn.onclick=()=>{
      const u=document.getElementById("user").value.trim();
      const p=document.getElementById("pass").value;
      const role=document.getElementById("roleSelect").value;
      const acc=ACCOUNTS.find(a=>a.username===u&&a.password===p&&a.role===role);
      if(!acc){alert("Hatalı kullanıcı adı veya şifre!");return;}
      currentUser=acc;
      loginPanel.classList.add("hidden");
      if(role==="class")studentPanel.classList.remove("hidden");
      else teacherPanel.classList.remove("hidden");
    };

    function logout(){
      currentUser=null;
      loginPanel.classList.remove("hidden");
      studentPanel.classList.add("hidden");
      teacherPanel.classList.add("hidden");
    }
    logoutBtn1.onclick=logout;
    logoutBtn2.onclick=logout;

    saveBtn.onclick=()=>{
      const name=document.getElementById("studentName").value.trim();
      const text=document.getElementById("assignmentArea").value;
      if(!name){alert("Adınızı girin");return;}
      localStorage.setItem("assign:"+name,JSON.stringify({text,savedAt:new Date()}));
      document.getElementById("lastSaved").textContent="Kaydedildi: "+new Date().toLocaleString("tr-TR");
      alert("Ödev kaydedildi!");
    };

    openBtn.onclick=()=>{
      const name=document.getElementById("teacherStudent").value.trim();
      const data=localStorage.getItem("assign:"+name);
      if(!data){alert("Bu isimle kayıt yok");return;}
      const obj=JSON.parse(data);
      document.getElementById("teacherArea").value=obj.text;
    };
  </script>
</body>
</html>
