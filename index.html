<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ödev Portalı — Demo</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#9aa4b2;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071021 0%, #071b2a 100%);color:#e6eef6}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:880px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:14px;padding:24px;box-shadow:0 6px 30px rgba(2,6,23,0.6);display:flex;flex-direction:column;gap:20px}
    h1{margin:0;font-size:20px}
    p{margin:4px 0 0 0;color:var(--muted);font-size:13px}
    input, textarea, select, button{border-radius:8px;border:1px solid rgba(255,255,255,0.06);padding:10px;background:var(--glass);color:inherit;outline:none}
    textarea{resize:vertical;min-height:180px}
    button{background:linear-gradient(90deg,var(--accent),#7c3aed);border:0;color:#031018;font-weight:600;cursor:pointer}
    .hidden{display:none}
    .panel{border:1px solid rgba(255,255,255,0.08);padding:14px;border-radius:10px}
    .muted{color:var(--muted);font-size:13px}
    .topbar{display:flex;justify-content:space-between;align-items:center}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">

      <div id="loginPanel">
        <h1>Ödev Portalı</h1>
        <p>Basit demo sürümü — yerel depolama (tarayıcıda saklanır)</p>
        <div style="margin-top:16px;display:grid;gap:10px;max-width:300px">
          <label>Hesap türü</label>
          <select id="roleSelect">
            <option value="class">Sınıf (öğrenci)</option>
            <option value="teacher">Hoca</option>
          </select>

          <label>Kullanıcı adı</label>
          <input id="user" type="text" placeholder="ör. sinif" />

          <label>Şifre</label>
          <input id="pass" type="password" placeholder="şifre" />

          <button id="loginBtn">Giriş Yap</button>
          <p class="muted">Örnek hesaplar:  
            <br>👨‍🏫 Hoca → kullanıcı: <code>spideymustafa</code> şifre: <code>42mustafa42</code>  
            <br>👨‍🎓 Öğrenci → kullanıcı: <code>sinif</code> şifre: <code>sinif123</code></p>
        </div>
      </div>

      <!-- Öğrenci Paneli -->
      <div id="studentPanel" class="hidden panel">
        <div class="topbar">
          <h2>👨‍🎓 Öğrenci Paneli</h2>
          <button onclick="logout()">Çıkış</button>
        </div>
        <div style="margin-top:10px">
          <label>Ad Soyad</label>
          <input id="studentName" type="text" placeholder="Adınızı girin" />
          <label>Ödeviniz</label>
          <textarea id="assignmentArea" placeholder="Buraya ödevinizi yazın..."></textarea>
          <button onclick="saveAssignment()">Kaydet</button>
          <p class="muted">Son kaydetme: <span id="lastSaved">—</span></p>
        </div>
      </div>

      <!-- Hoca Paneli -->
      <div id="teacherPanel" class="hidden panel">
        <div class="topbar">
          <h2>👨‍🏫 Hoca Paneli</h2>
          <button onclick="logout()">Çıkış</button>
        </div>
        <div style="margin-top:10px">
          <label>Öğrenci adı</label>
          <input id="teacherStudent" type="text" placeholder="İsim girin veya listeden seçin" />
          <button onclick="openAssignment()">Aç</button>
          <button onclick="deleteAssignment()">Sil</button>
          <button onclick="downloadAll()">Tümünü İndir (JSON)</button>
        </div>
        <div style="margin-top:10px">
          <textarea id="teacherArea" placeholder="Seçilen öğrencinin ödevi burad￼
a görünecek..."></textarea>
          <p class="muted">Son kaydetme: <span id="teacherLastSaved">—</span></p>
        </div>
      </div>

    </div>
  </div>

  <script>
    const ACCOUNTS = [
      {username:'hoca', password:'hoca123', role:'teacher'},
      {username:'sinif', password:'sinif123', role:'class'}
    ];

    const loginPanel = document.getElementById('loginPanel');
    const studentPanel = document.getElementById('studentPanel');
    const teacherPanel = document.getElementById('teacherPanel');
    const roleSelect = document.getElementById('roleSelect');
    const userInput = document.getElementById('user');
    const passInput = document.getElementById('pass');
    const assignmentArea = document.getElementById('assignmentArea');
    const studentName = document.getElementById('studentName');
    const lastSaved = document.getElementById('lastSaved');
    const teacherStudent = document.getElementById('teacherStudent');
    const teacherArea = document.getElementById('teacherArea');
    const teacherLastSaved = document.getElementById('teacherLastSaved');
    const loginBtn = document.getElementById('loginBtn');

    let currentUser = null;
    let currentStudent = null;

    function keyFor(name){ return 'assign:' + name.trim().toLowerCase(); }￼

    function formatDate(d){ return d ? new Date(d).toLocaleString('tr-TR') : '—'; }

    function login(){
      const u = userInput.value.trim();
      const p = passInput.value;
      const role = roleSelect.value;
      const found = ACCOUNTS.find(a => a.username===u && a.password===p && a.role===role);
      if(!found){ alert('Kullanıcı adı veya şifre hatalı.'); return; }
      currentUser = found;
      loginPanel.classList.add('hidden');
      if(role==='class') studentPanel.classList.remove('hidden');
      if(role==='teacher') teacherPanel.classList.remove('hidden');
    }

    function logout(){
      currentUser = null;
      currentStudent = null;
      loginPanel.classList.remove('hidden');
      studentPanel.classList.add('hidden');
      teacherPanel.classList.add('hidden');
      assignmentArea.value='';
      teacherArea.value='';
      studentName.value='';
      teacherStudent.value='';
    }

    function saveAssignment(){
      const name = studentName.value.trim();
      if(!name){ alert('Lütfen adınızı girin.'); return; }
      const text = assignmentArea.value;
      const data = { text, savedAt: new Date().toISOString() };
      localStorage.setItem(keyFor(name), JSON.stringify(data));
      lastSaved.textContent = formatDate(data.savedAt);
      alert('Ödev kaydedildi.');
    }

    function openAssignment(){
      const name = teacherStudent.value.trim();
      if(!name){ alert('Öğrenci ismini girin.'); return; }
      const data = localStorage.getItem(keyFor(name));
      if(!data){ teacherArea.value='Bu öğrencinin kaydı yok.'; teacherLastSaved.textContent='—'; return; }
      const obj = JSON.parse(data);
      teacherArea.value = obj.text;
      teacherLastSaved.textContent = formatDate(obj.savedAt);
    }

    function deleteAssignment(){
      const name = teacherStudent.value.trim();
      if(!name) return alert('İsim girin.');
      if(confirm(`${name} adlı öğrencinin ödevini silmek istiyor musunuz?`)){
        localStorage.removeItem(keyFor(name));
        teacherArea.value='';
        teacherLastSaved.textContent='—';
        alert('Silindi.');
      }
    }

    function downloadAll(){
      const all = {};
      for(let i=0;i<localStorage.length;i++){
        const k = localStorage.key(i);
        if(k.startsWith('assign:')){
          all[k.replace('assign:','')] = JSON.parse(localStorage.getItem(k));
        }
      }
      const blob = new Blob([JSON.stringify(all,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'odevler.json'; a.click();
      URL.revokeObjectURL(url);
    }

    loginBtn.onclick = login;
  </script>
</body>
</html>
