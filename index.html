<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ã–dev PortalÄ± â€” Demo</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#9aa4b2;--glass:rgba(255,255,255,0.03)}
    *{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071021 0%, #071b2a 100%);color:#e6eef6}
    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:880px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:14px;padding:24px;box-shadow:0 6px 30px rgba(2,6,23,0.6);display:flex;flex-direction:column;gap:20px}
    h1{margin:0;font-size:20px}
    p{margin:4px 0 0 0;color:var(--muted);font-size:13px}
    input, textarea, select, button{border-radius:8px;border:1px solid rgba(255,255,255,0.06);padding:10px;background:var(--glass);color:inherit;outline:none}
    textarea{resize:vertical;min-height:180px}
    button{background:linear-gradient(90deg,var(--accent),#7c3aed);border:0;color:#031018;font-weight:600;cursor:pointer}
    .hidden{display:none}
    .panel{border:1px solid rgba(255,255,255,0.08);padding:14px;border-radius:10px}
    .muted{color:var(--muted);font-size:13px}
    .topbar{display:flex;justify-content:space-between;align-items:center}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">

      <div id="loginPanel">
        <h1>Ã–dev PortalÄ±</h1>
        <p>Basit demo sÃ¼rÃ¼mÃ¼ â€” yerel depolama (tarayÄ±cÄ±da saklanÄ±r)</p>
        <div style="margin-top:16px;display:grid;gap:10px;max-width:300px">
          <label>Hesap tÃ¼rÃ¼</label>
          <select id="roleSelect">
            <option value="class">SÄ±nÄ±f (Ã¶ÄŸrenci)</option>
            <option value="teacher">Hoca</option>
          </select>

          <label>KullanÄ±cÄ± adÄ±</label>
          <input id="user" type="text" placeholder="Ã¶r. sinif" />

          <label>Åifre</label>
          <input id="pass" type="password" placeholder="ÅŸifre" />

          <button id="loginBtn">GiriÅŸ Yap</button>
          <p class="muted">Ã–rnek hesaplar:  
            <br>ğŸ‘¨â€ğŸ« Hoca â†’ kullanÄ±cÄ±: <code>spideymustafa</code> ÅŸifre: <code>42mustafa42</code>  
            <br>ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci â†’ kullanÄ±cÄ±: <code>sinif</code> ÅŸifre: <code>sinif123</code></p>
        </div>
      </div>

      <!-- Ã–ÄŸrenci Paneli -->
      <div id="studentPanel" class="hidden panel">
        <div class="topbar">
          <h2>ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci Paneli</h2>
          <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
        </div>
        <div style="margin-top:10px">
          <label>Ad Soyad</label>
          <input id="studentName" type="text" placeholder="AdÄ±nÄ±zÄ± girin" />
          <label>Ã–deviniz</label>
          <textarea id="assignmentArea" placeholder="Buraya Ã¶devinizi yazÄ±n..."></textarea>
          <button onclick="saveAssignment()">Kaydet</button>
          <p class="muted">Son kaydetme: <span id="lastSaved">â€”</span></p>
        </div>
      </div>

      <!-- Hoca Paneli -->
      <div id="teacherPanel" class="hidden panel">
        <div class="topbar">
          <h2>ğŸ‘¨â€ğŸ« Hoca Paneli</h2>
          <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
        </div>
        <div style="margin-top:10px">
          <label>Ã–ÄŸrenci adÄ±</label>
          <input id="teacherStudent" type="text" placeholder="Ä°sim girin veya listeden seÃ§in" />
          <button onclick="openAssignment()">AÃ§</button>
          <button onclick="deleteAssignment()">Sil</button>
          <button onclick="downloadAll()">TÃ¼mÃ¼nÃ¼ Ä°ndir (JSON)</button>
        </div>
        <div style="margin-top:10px">
          <textarea id="teacherArea" placeholder="SeÃ§ilen Ã¶ÄŸrencinin Ã¶devi buradï¿¼
a gÃ¶rÃ¼necek..."></textarea>
          <p class="muted">Son kaydetme: <span id="teacherLastSaved">â€”</span></p>
        </div>
      </div>

    </div>
  </div>

  <script>
    const ACCOUNTS = [
      {username:'hoca', password:'hoca123', role:'teacher'},
      {username:'sinif', password:'sinif123', role:'class'}
    ];

    const loginPanel = document.getElementById('loginPanel');
    const studentPanel = document.getElementById('studentPanel');
    const teacherPanel = document.getElementById('teacherPanel');
    const roleSelect = document.getElementById('roleSelect');
    const userInput = document.getElementById('user');
    const passInput = document.getElementById('pass');
    const assignmentArea = document.getElementById('assignmentArea');
    const studentName = document.getElementById('studentName');
    const lastSaved = document.getElementById('lastSaved');
    const teacherStudent = document.getElementById('teacherStudent');
    const teacherArea = document.getElementById('teacherArea');
    const teacherLastSaved = document.getElementById('teacherLastSaved');
    const loginBtn = document.getElementById('loginBtn');

    let currentUser = null;
    let currentStudent = null;

    function keyFor(name){ return 'assign:' + name.trim().toLowerCase(); }ï¿¼

    function formatDate(d){ return d ? new Date(d).toLocaleString('tr-TR') : 'â€”'; }

    function login(){
      const u = userInput.value.trim();
      const p = passInput.value;
      const role = roleSelect.value;
      const found = ACCOUNTS.find(a => a.username===u && a.password===p && a.role===role);
      if(!found){ alert('KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±.'); return; }
      currentUser = found;
      loginPanel.classList.add('hidden');
      if(role==='class') studentPanel.classList.remove('hidden');
      if(role==='teacher') teacherPanel.classList.remove('hidden');
    }

    function logout(){
      currentUser = null;
      currentStudent = null;
      loginPanel.classList.remove('hidden');
      studentPanel.classList.add('hidden');
      teacherPanel.classList.add('hidden');
      assignmentArea.value='';
      teacherArea.value='';
      studentName.value='';
      teacherStudent.value='';
    }

    function saveAssignment(){
      const name = studentName.value.trim();
      if(!name){ alert('LÃ¼tfen adÄ±nÄ±zÄ± girin.'); return; }
      const text = assignmentArea.value;
      const data = { text, savedAt: new Date().toISOString() };
      localStorage.setItem(keyFor(name), JSON.stringify(data));
      lastSaved.textContent = formatDate(data.savedAt);
      alert('Ã–dev kaydedildi.');
    }

    function openAssignment(){
      const name = teacherStudent.value.trim();
      if(!name){ alert('Ã–ÄŸrenci ismini girin.'); return; }
      const data = localStorage.getItem(keyFor(name));
      if(!data){ teacherArea.value='Bu Ã¶ÄŸrencinin kaydÄ± yok.'; teacherLastSaved.textContent='â€”'; return; }
      const obj = JSON.parse(data);
      teacherArea.value = obj.text;
      teacherLastSaved.textContent = formatDate(obj.savedAt);
    }

    function deleteAssignment(){
      const name = teacherStudent.value.trim();
      if(!name) return alert('Ä°sim girin.');
      if(confirm(`${name} adlÄ± Ã¶ÄŸrencinin Ã¶devini silmek istiyor musunuz?`)){
        localStorage.removeItem(keyFor(name));
        teacherArea.value='';
        teacherLastSaved.textContent='â€”';
        alert('Silindi.');
      }
    }

    function downloadAll(){
      const all = {};
      for(let i=0;i<localStorage.length;i++){
        const k = localStorage.key(i);
        if(k.startsWith('assign:')){
          all[k.replace('assign:','')] = JSON.parse(localStorage.getItem(k));
        }
      }
      const blob = new Blob([JSON.stringify(all,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'odevler.json'; a.click();
      URL.revokeObjectURL(url);
    }

    loginBtn.onclick = login;
  </script>
</body>
</html>
